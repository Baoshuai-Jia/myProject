<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style type="text/css">
        .aa{
            position: absolute;
            width: 100px;
            height: 100px;
            background: darkturquoise;
        }
    </style>
    <script src="../01/js/vue.js" type="text/javascript"></script>
</head>
<body>
<div id = 'a'>
    <div class="aa" v-drag></div>
</div>
<script type="text/javascript">
  // Vue.directive('drag',{
  //
  //   inserted:function(el,binding){
  //     el.onmousedown=function(e){
  //       e.stopPropagation();
  //       let disx = e.pageX - el.offsetLeft;
  //       let disy = e.pageY - el.offsetTop;
  //       document.onmousemove = function (e){
  //         e.preventDefault();
  //         el.style.left = e.pageX - disx+'px';
  //         el.style.top = e.pageY - disy+'px';
  //       }
  //       document.onmouseup = function(){
  //         document.onmousemove = document.onmouseup = null;
  //         //binding 传参，可忽略
  //         if(binding && binding.value){
  //           binding.value.clientX=parseInt(el.style.left);
  //           binding.value.clientY=parseInt(el.style.top);
  //         }
  //
  //       }
  //     }
  //   },
  // });
    // Vue.directive("drag",function (el) {
    //   el.onmousedown=function (e) {
    //     var strX=e.pageX=this.offsetLeft;
    //     var strY=e.pageY=this.offsetTop;
    //     document.onmousemove=function (e) {
    //       el.style.left=e.pageX-strX+"px";
    //       el.style.top=e.pageY-strY+"px";
    //     };
    //     document.onmouseup=function () {
    //       document.onmousemove=document.onmouseup=null;
    //     }
    //   }
    // });
    var vm = new Vue({
      el:'#a',
      data:{},
      directives: {
        drag: {
          inserted:function(el,binding){
            el.onmousedown=function(e){
              e.stopPropagation();
              let disx = e.pageX - el.offsetLeft;
              let disy = e.pageY - el.offsetTop;
              document.onmousemove = function (e){
                e.preventDefault();
                el.style.left = e.pageX - disx+'px';
                el.style.top = e.pageY - disy+'px';
              }
              document.onmouseup = function(){
                document.onmousemove = document.onmouseup = null;
                //binding 传参，可忽略
                if(binding && binding.value){
                  binding.value.clientX=parseInt(el.style.left);
                  binding.value.clientY=parseInt(el.style.top);
                }

              }
            }
          }
        }
      }
    })
</script>
</body>
</html>